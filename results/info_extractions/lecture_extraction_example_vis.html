<style>
.lx-highlight { position: relative; border-radius:3px; padding:1px 2px;}
.lx-highlight .lx-tooltip {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  background: #333;
  color: #fff;
  text-align: left;
  border-radius: 4px;
  padding: 6px 8px;
  position: absolute;
  z-index: 1000;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  max-width: 240px;
  white-space: normal;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.lx-highlight:hover .lx-tooltip { visibility: visible; opacity:1; }
.lx-animated-wrapper { max-width: 100%; font-family: Arial, sans-serif; }
.lx-controls {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 8px;
  padding: 12px; margin-bottom: 16px;
}
.lx-button-row {
  display: flex; justify-content: center; gap: 8px; margin-bottom: 12px;
}
.lx-control-btn {
  background: #4285f4; color: white; border: none; border-radius: 4px;
  padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;
  transition: background-color 0.2s;
}
.lx-control-btn:hover { background: #3367d6; }
.lx-progress-container {
  margin-bottom: 8px;
}
.lx-progress-slider {
  width: 100%; margin: 0; appearance: none; height: 6px;
  background: #ddd; border-radius: 3px; outline: none;
}
.lx-progress-slider::-webkit-slider-thumb {
  appearance: none; width: 18px; height: 18px; background: #4285f4;
  border-radius: 50%; cursor: pointer;
}
.lx-progress-slider::-moz-range-thumb {
  width: 18px; height: 18px; background: #4285f4; border-radius: 50%;
  cursor: pointer; border: none;
}
.lx-status-text {
  text-align: center; font-size: 12px; color: #666; margin-top: 4px;
}
.lx-text-window {
  font-family: monospace; white-space: pre-wrap; border: 1px solid #90caf9;
  padding: 12px; max-height: 260px; overflow-y: auto; margin-bottom: 12px;
  line-height: 1.6;
}
.lx-attributes-panel {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 6px;
  padding: 8px 10px; margin-top: 8px; font-size: 13px;
}
.lx-current-highlight {
  border-bottom: 4px solid #ff4444;
  font-weight: bold;
  animation: lx-pulse 1s ease-in-out;
}
@keyframes lx-pulse {
  0% { text-decoration-color: #ff4444; }
  50% { text-decoration-color: #ff0000; }
  100% { text-decoration-color: #ff4444; }
}
.lx-legend {
  font-size: 12px; margin-bottom: 8px;
  padding-bottom: 8px; border-bottom: 1px solid #e0e0e0;
}
.lx-label {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 3px;
  margin-right: 4px;
  color: #000;
}
.lx-attr-key {
  font-weight: 600;
  color: #1565c0;
  letter-spacing: 0.3px;
}
.lx-attr-value {
  font-weight: 400;
  opacity: 0.85;
  letter-spacing: 0.2px;
}

/* Add optimizations with larger fonts and better readability for GIFs */
.lx-gif-optimized .lx-text-window { font-size: 16px; line-height: 1.8; }
.lx-gif-optimized .lx-attributes-panel { font-size: 15px; }
.lx-gif-optimized .lx-current-highlight { text-decoration-thickness: 4px; }
</style>
    <div class="lx-animated-wrapper lx-gif-optimized">
      <div class="lx-attributes-panel">
        <div class="lx-legend">Highlights Legend: <span class="lx-label" style="background-color:#D2E3FC;">key_concept</span> <span class="lx-label" style="background-color:#C8E6C9;">practical_insight</span></div>
        <div id="attributesContainer"></div>
      </div>
      <div class="lx-text-window" id="textWindow">
        # LECTURE ANALYSIS: Interactive Participation and Lottery System
## Video Segment: 02:59-04:59

[SLIDE DESCRIPTION]
A slide displays &#x27;slido&#x27; at the top, a QR code, and the text &#x27;Join at slido.com #5216 897&#x27;.

[TRANSCRIPT - 03:01-04:07]
And then here&#x27;s the QR code on the whiteboard. Scan it and mark that URL. It will be used later. Right now it will say &#x27;did not accept&#x27; when we try to open a <span class="lx-highlight lx-current-highlight" data-idx="0" style="background-color:#D2E3FC;">lottery participation time</span>. <span class="lx-highlight" data-idx="1" style="background-color:#C8E6C9;">Right now it will say &#x27;did not accept any response&#x27; because we haven&#x27;t opened it. We will open it for the time when I say it is the time.</span> So then get this QR code now. Here I am not going to relieve this QR code during the time. We will see the QR code lottery time for three times, I think for today&#x27;s session. <span class="lx-highlight" data-idx="2" style="background-color:#C8E6C9;">And when a lottery starts, you guys would go for this class lottery QR code first and then if still have the time, you can go to the online lottery so you can participate twice.</span> And in the end of the session, our TA will come here and to play the lottery game. Yay.

[TRANSCRIPT - 04:16-04:23]
So if your classmate just come, did not hear, please let them know, okay? Do this QR code first.

[TRANSCRIPT - 04:47-04:58]
This is the slide. It&#x27;s not a lottery. This is for <span class="lx-highlight" data-idx="3" style="background-color:#D2E3FC;">Q&amp;A or some other question during the class.</span>

      </div>
      <div class="lx-controls">
        <div class="lx-button-row">
          <button class="lx-control-btn" onclick="playPause()">▶️ Play</button>
          <button class="lx-control-btn" onclick="prevExtraction()">⏮ Previous</button>
          <button class="lx-control-btn" onclick="nextExtraction()">⏭ Next</button>
        </div>
        <div class="lx-progress-container">
          <input type="range" id="progressSlider" class="lx-progress-slider"
                 min="0" max="3" value="0"
                 onchange="jumpToExtraction(this.value)">
        </div>
        <div class="lx-status-text">
          Entity <span id="entityInfo">1/4</span> |
          Pos <span id="posInfo">[394-420]</span>
        </div>
      </div>
    </div>

    <script>
      (function() {
        const extractions = [{"index": 0, "class": "key_concept", "text": "lottery participation time", "color": "#D2E3FC", "startPos": 394, "endPos": 420, "beforeText": " here&#x27;s the QR code on the whiteboard. Scan it and mark that URL. It will be used later. Right now it will say &#x27;did not accept&#x27; when we try to open a ", "extractionText": "lottery participation time", "afterText": ". Right now it will say &#x27;did not accept any response&#x27; because we haven&#x27;t opened it. We will open it for the time when I say it is the time. So then ge", "attributesHtml": "<div><strong>class:</strong> key_concept</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">concept_name</span>: <span class=\"lx-attr-value\">Lottery Participation Time</span>, <span class=\"lx-attr-key\">definition</span>: <span class=\"lx-attr-value\">A designated period during which participants can engage with a lottery system, indicated by a QR code.</span>, <span class=\"lx-attr-key\">difficulty_rating</span>: <span class=\"lx-attr-value\">Beginner</span>, <span class=\"lx-attr-key\">simplified_explanation</span>: <span class=\"lx-attr-value\">A specific time window when you can join a lottery using a QR code.</span>}</div>"}, {"index": 1, "class": "practical_insight", "text": "Right now it will say 'did not accept any response' because we haven't opened it. We will open it for the time when I say it is the time.", "color": "#C8E6C9", "startPos": 422, "endPos": 559, "beforeText": "hiteboard. Scan it and mark that URL. It will be used later. Right now it will say &#x27;did not accept&#x27; when we try to open a lottery participation time. ", "extractionText": "Right now it will say &#x27;did not accept any response&#x27; because we haven&#x27;t opened it. We will open it for the time when I say it is the time.", "afterText": " So then get this QR code now. Here I am not going to relieve this QR code during the time. We will see the QR code lottery time for three times, I th", "attributesHtml": "<div><strong>class:</strong> practical_insight</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">insight_type</span>: <span class=\"lx-attr-value\">System Behavior</span>, <span class=\"lx-attr-key\">related_concept</span>: <span class=\"lx-attr-value\">Lottery Participation Time</span>, <span class=\"lx-attr-key\">summary_of_insight</span>: <span class=\"lx-attr-value\">The lottery system will not accept responses until it is explicitly opened.</span>}</div>"}, {"index": 2, "class": "practical_insight", "text": "And when a lottery starts, you guys would go for this class lottery QR code first and then if still have the time, you can go to the online lottery so you can participate twice.", "color": "#C8E6C9", "startPos": 734, "endPos": 911, "beforeText": " now. Here I am not going to relieve this QR code during the time. We will see the QR code lottery time for three times, I think for today&#x27;s session. ", "extractionText": "And when a lottery starts, you guys would go for this class lottery QR code first and then if still have the time, you can go to the online lottery so you can participate twice.", "afterText": " And in the end of the session, our TA will come here and to play the lottery game. Yay.\n\n[TRANSCRIPT - 04:16-04:23]\nSo if your classmate just come, d", "attributesHtml": "<div><strong>class:</strong> practical_insight</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">insight_type</span>: <span class=\"lx-attr-value\">Best Practice</span>, <span class=\"lx-attr-key\">related_concept</span>: <span class=\"lx-attr-value\">Lottery Participation</span>, <span class=\"lx-attr-key\">summary_of_insight</span>: <span class=\"lx-attr-value\">Prioritize the in-class QR code lottery before attempting the online lottery to maximize participation chances.</span>}</div>"}, {"index": 3, "class": "key_concept", "text": "Q&A or some other question during the class.", "color": "#D2E3FC", "startPos": 1204, "endPos": 1248, "beforeText": "come, did not hear, please let them know, okay? Do this QR code first.\n\n[TRANSCRIPT - 04:47-04:58]\nThis is the slide. It&#x27;s not a lottery. This is for ", "extractionText": "Q&amp;A or some other question during the class.", "afterText": "\n", "attributesHtml": "<div><strong>class:</strong> key_concept</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">concept_name</span>: <span class=\"lx-attr-value\">Q&amp;A Session</span>, <span class=\"lx-attr-key\">definition</span>: <span class=\"lx-attr-value\">A segment of the class dedicated to addressing questions from students or discussing other relevant topics.</span>, <span class=\"lx-attr-key\">difficulty_rating</span>: <span class=\"lx-attr-value\">Beginner</span>, <span class=\"lx-attr-key\">simplified_explanation</span>: <span class=\"lx-attr-value\">A time set aside for students to ask questions or discuss topics related to the class material.</span>}</div>"}];
        let currentIndex = 0;
        let isPlaying = false;
        let animationInterval = null;
        let animationSpeed = 1.0;

        function updateDisplay() {
          const extraction = extractions[currentIndex];
          if (!extraction) return;

          document.getElementById('attributesContainer').innerHTML = extraction.attributesHtml;
          document.getElementById('entityInfo').textContent = (currentIndex + 1) + '/' + extractions.length;
          document.getElementById('posInfo').textContent = '[' + extraction.startPos + '-' + extraction.endPos + ']';
          document.getElementById('progressSlider').value = currentIndex;

          const playBtn = document.querySelector('.lx-control-btn');
          if (playBtn) playBtn.textContent = isPlaying ? '⏸ Pause' : '▶️ Play';

          const prevHighlight = document.querySelector('.lx-text-window .lx-current-highlight');
          if (prevHighlight) prevHighlight.classList.remove('lx-current-highlight');
          const currentSpan = document.querySelector('.lx-text-window span[data-idx="' + currentIndex + '"]');
          if (currentSpan) {
            currentSpan.classList.add('lx-current-highlight');
            currentSpan.scrollIntoView({block: 'center', behavior: 'smooth'});
          }
        }

        function nextExtraction() {
          currentIndex = (currentIndex + 1) % extractions.length;
          updateDisplay();
        }

        function prevExtraction() {
          currentIndex = (currentIndex - 1 + extractions.length) % extractions.length;
          updateDisplay();
        }

        function jumpToExtraction(index) {
          currentIndex = parseInt(index);
          updateDisplay();
        }

        function playPause() {
          if (isPlaying) {
            clearInterval(animationInterval);
            isPlaying = false;
          } else {
            animationInterval = setInterval(nextExtraction, animationSpeed * 1000);
            isPlaying = true;
          }
          updateDisplay();
        }

        window.playPause = playPause;
        window.nextExtraction = nextExtraction;
        window.prevExtraction = prevExtraction;
        window.jumpToExtraction = jumpToExtraction;

        updateDisplay();
      })();
    </script>